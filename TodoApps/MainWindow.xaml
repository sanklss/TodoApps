<Window x:Class="TodoApps.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:local="clr-namespace:TodoApps"
        Title="Todo App" Height="600" Width="900"
        MinHeight="400" MinWidth="700"
        Background="{DynamicResource WindowBackground}"
        Foreground="{DynamicResource ForegroundBrush}">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <materialDesign:BundledTheme BaseTheme="Light" PrimaryColor="Blue" SecondaryColor="DeepOrange"/>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <local:CategoryConverter x:Key="CategoryConverter"/>
            <SolidColorBrush x:Key="WindowBackground" Color="White"/>
            <SolidColorBrush x:Key="ForegroundBrush" Color="Black"/>
            <SolidColorBrush x:Key="DataGridBackground" Color="White"/>
            <SolidColorBrush x:Key="DataGridForeground" Color="Black"/>
        </ResourceDictionary>
    </Window.Resources>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,0,0,10">
            <TextBox x:Name="EmailBox" Width="150" Margin="0,0,5,0" materialDesign:HintAssist.Hint="Email"/>
            <PasswordBox x:Name="PasswordBox" Width="150" Margin="0,0,5,0"/>
            <Button Content="Войти" Click="SignIn_Click" Margin="0,0,5,0"/>
            <Button Content="Регистрация" Click="SignUp_Click"/>
            <TextBlock x:Name="StatusText" Foreground="Red" Margin="10,0,0,0" VerticalAlignment="Center"/>
        </StackPanel>
        <StackPanel x:Name="FilterPanel" Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBox x:Name="SearchBox" Width="200" Margin="0,0,10,0"
                     materialDesign:HintAssist.Hint="Поиск" TextChanged="FilterTasks"/>
            <ComboBox x:Name="CategoryFilter" Width="150" Margin="0,0,10,0"
                      materialDesign:HintAssist.Hint="Категория" SelectionChanged="FilterTasks">
                <ComboBoxItem Content="Все"/>
                <ComboBoxItem Content="Работа"/>
                <ComboBoxItem Content="Личное"/>
            </ComboBox>
            <CheckBox x:Name="CompletedFilter" Content="Выполнено"
                      VerticalAlignment="Center" Checked="FilterTasks" Unchecked="FilterTasks"/>
        </StackPanel>
        <DataGrid x:Name="TasksGrid" Grid.Row="2" AutoGenerateColumns="False" SelectionMode="Single"
                  CanUserReorderColumns="False" AllowDrop="True"
                  PreviewMouseLeftButtonDown="TasksGrid_PreviewMouseLeftButtonDown"
                  MouseMove="TasksGrid_MouseMove"
                  DragOver="TasksGrid_DragOver"
                  Drop="TasksGrid_Drop"
                  Margin="0"
                  Background="{DynamicResource DataGridBackground}"
                  Foreground="{DynamicResource DataGridForeground}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Название" Binding="{Binding Title}" Width="*"/>
                <DataGridTextColumn Header="Описание" Binding="{Binding Description}" Width="2*"/>
                <DataGridTextColumn Header="Дедлайн" Binding="{Binding DueDate}" Width="150"/>
                <DataGridCheckBoxColumn Header="Выполнено" Binding="{Binding IsCompleted}" Width="100"/>
                <DataGridTextColumn Header="Категория" Width="120"
                                    Binding="{Binding Category, Converter={StaticResource CategoryConverter}}"/>
                <DataGridTextColumn Header="Теги" Binding="{Binding TagsString}" Width="150"/>
                <DataGridTextColumn Header="Повтор" Binding="{Binding Recurrence}" Width="100"/>
            </DataGrid.Columns>
        </DataGrid>
        <StackPanel Orientation="Horizontal" Grid.Row="3" HorizontalAlignment="Center" Margin="0,10,0,0">
            <Button x:Name="AddTaskBtn" Content="Добавить" Click="AddTask_Click" Style="{StaticResource MaterialDesignRaisedButton}" Margin="5"/>
            <Button x:Name="EditTaskBtn" Content="Редактировать" Click="EditTask_Click" Style="{StaticResource MaterialDesignRaisedButton}" Margin="5"/>
            <Button x:Name="DeleteTaskBtn" Content="Удалить" Click="DeleteTask_Click" Style="{StaticResource MaterialDesignRaisedButton}" Margin="5"/>
            <Button x:Name="ToggleThemeBtn" Content="Темная/Светлая тема" Click="ToggleTheme_Click" Style="{StaticResource MaterialDesignRaisedButton}" Margin="5"/>
        </StackPanel>
    </Grid>
</Window>